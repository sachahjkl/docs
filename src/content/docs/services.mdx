---
title: "Services"
description: "Spark Services"
---

## Introduction
Spark includes Service classes. Services are regular C# classes where you can tuck away business logic or data access methods to make them re-usable throughout your application.

## Services
To create a Service, simply use the Spark `make service` command.

```bash
spark make service DeveloperService
```
A new class in the `Application/Services` folder will be created.

```csharp
public class DeveloperService
{
    public DeveloperService()
    {
    }
}
```

### Registering Services
Before you're able to dependency inject a new service, you need to register it in the DI container. Spark makes this very simple. 

Simply add your service to the `AddCustomServices` method in the  `Application/Startup/AppServiceRegistration.cs` class.
```csharp
private static IServiceCollection AddCustomServices(this IServiceCollection services)
{
    ...
    services.AddScoped<DeveloperService>();
    return services;
}
```

That's it!

### Injecting Services
Once a service is registered, it can be injected into any Razor component, controller, or other registered services.

**Injecting a Service in a controller**

Use standard dependency injection.
```csharp
    public class DevelopersController : Controller
    {
        private readonly DeveloperService _developerService;

        public DevelopersController(DeveloperService developerService) {
            _developerService = developerService;
        }

        [Route("developers")]
        public IActionResult Index()
        {
            List<Developer> developers = _developerService.GetAll();
            ViewBag.Developers = developers;
            return View();
        }
    }
```

**Injecting a Service in a Razor component**

Use the `@inject` attribute in a Razor component to inject your services.
```razor
@page "/developers"
@inject DeveloperService developerService

<p>Developer page</p>

@code {
	private List<Developer> developers;

	protected override async Task OnInitializedAsync()
	{
		developers = await developerService.GetAll();
	}
}
```

**Injecting a service into another service**

Use standard dependency injection.
```csharp
public class DeveloperService
{
    private readonly ProjectService _projectService;

    public DeveloperService(ProjectService projectService)
    {
        this._projectService = projectService;
    }

    public List<projects> GetDevelopersProjects(int developerId) 
    {
        return this._projectService.GetProjectsByDeveloperId(developerId);
    }
}
```

>
> For this to work, both the `DeveloperService` and `ProjectService` must be registered in your apps DI container.
>

## Data Access from a service
In your service classes, you can inject the `DatabaseContext` to save, update, or delete models.

```csharp
public class DeveloperService
{
    private readonly DatabaseContext _db;

    public DeveloperService(DatabaseContext db)
    {
        _db = db;
    }

    // Get all data
    public async Task<List<Developer>> GetAll()
    {
        return await _db.Developers.ToListAsync();
    }
    
    // Get a single entity
    public async Task<Developer> GetDeveloper(int id)
    {
        return await _db.Developers.FindAsync(id);
    }

    // Filter data
    public async Task<List<Developer>> GetDevelopersByName(string name)
    {
        return await _db.Developers
            .Where(d => d.Name.Contains(name))
            .ToListAsync();
    }
}
```
